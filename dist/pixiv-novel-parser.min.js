!function l(r,n,e){function u(s,v){if(!n[s]){if(!r[s]){var t="function"==typeof require&&require;if(!v&&t)return t(s,!0);if(a)return a(s,!0);throw Error("Cannot find module '"+s+"'")}var i=n[s]={exports:{}};r[s][0].call(i.exports,function(l){var n=r[s][1][l];return u(n?n:l)},i,i.exports,l,r,n,e)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<e.length;s++)u(e[s]);return u}({1:[function(l){(function(r){"use strict";var n={};n="object"==typeof self&&self.self===self?self:"object"==typeof r&&r.global===r?r:this,n.PixivNovelParser=l("./")}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":2}],2:[function(l,r){!function(){"use strict";function n(l){l=l||{},this.syntax=l.syntax||"basic",this.tree=[]}var e,u;e=l("./parser.peg.js"),u=l("./parser-extended.peg.js"),n.parse=function(l,r){r=r||{},r.syntax=r.syntax||"basic";try{switch(l=l.replace(/\r?\n/g,"\n").replace(/[\s\u200c]/g,function(l){return"\n"===l||"ã€€"===l?l:" "}),r.syntax){case"extended":return u.parse(l);case"basic":default:return e.parse(l)}}catch(n){return console.error(n),[{type:"text",val:l}]}},n.prototype.parse=function(l){return this.tree=n.parse(l,{syntax:this.syntax}),this},n.prototype.toJSON=function(){return JSON.stringify(this.tree)},r.exports={Parser:n}}()},{"./parser-extended.peg.js":3,"./parser.peg.js":4}],3:[function(l,r){!function(){var l=function(){var l={parse:function(l,r){function n(l,r,n){for(var e=l,u=n-l.length,a=0;u>a;a++)e=r+e;return e}function e(l){var r=l.charCodeAt(0);if(255>=r)var e="x",u=2;else var e="u",u=4;return"\\"+e+n(r.toString(16).toUpperCase(),"0",u)}function u(l){return'"'+l.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/[\x80-\uFFFF]/g,e)+'"'}function a(l){fl>tl||(tl>fl&&(fl=tl,ol=[]),ol.push(l))}function s(){var l="novel@"+tl,r=cl[l];if(r)return tl=r.nextPos,r.result;var n=[],e=x();if(null!==e)var u=e;else{var a=v();if(null!==a)var u=a;else var u=null}for(;null!==u;){n.push(u);var e=x();if(null!==e)var u=e;else{var a=v();if(null!==a)var u=a;else var u=null}}return cl[l]={nextPos:tl,result:n},n}function v(){var r="text@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;var e=tl;if(null!==l.substr(tl).match(/^[^[\r\n]/)){var u=l.charAt(tl);tl++}else{var u=null;il&&a("[^[\\r\\n]")}if(null!==u)for(var s=[];null!==u;)if(s.push(u),null!==l.substr(tl).match(/^[^[\r\n]/)){var u=l.charAt(tl);tl++}else{var u=null;il&&a("[^[\\r\\n]")}else var s=null;if(null!==s)var v=s;else{var t=tl,i=tl,f=il;il=!1;var o=tl,c=il;il=!1;var h=x();if(il=c,null===h)var P="";else{var P=null;tl=o}if(il=f,null!==P){var m="";tl=i}else var m=null;if(null!==m){if("["===l.substr(tl,1)){var g="[";tl+=1}else{var g=null;il&&a('"["')}if(null!==g)var A=[m,g];else{var A=null;tl=t}}else{var A=null;tl=t}if(null!==A)var v=A;else{var j=tl,T=tl,y=il;il=!1;var F=tl,C=il;il=!1;var E=p();if(null!==E)var I=E;else{var d=b();if(null!==d)var I=d;else var I=null}if(il=C,null===I)var w="";else{var w=null;tl=F}if(il=y,null!==w){var S="";tl=T}else var S=null;if(null!==S){var R=L();if(null!==R)var k=[S,R];else{var k=null;tl=j}}else{var k=null;tl=j}if(null!==k)var v=k;else var v=null}}if(null!==v)for(var D=[];null!==v;){if(D.push(v),null!==l.substr(tl).match(/^[^[\r\n]/)){var u=l.charAt(tl);tl++}else{var u=null;il&&a("[^[\\r\\n]")}if(null!==u)for(var s=[];null!==u;)if(s.push(u),null!==l.substr(tl).match(/^[^[\r\n]/)){var u=l.charAt(tl);tl++}else{var u=null;il&&a("[^[\\r\\n]")}else var s=null;if(null!==s)var v=s;else{var t=tl,i=tl,f=il;il=!1;var o=tl,c=il;il=!1;var h=x();if(il=c,null===h)var P="";else{var P=null;tl=o}if(il=f,null!==P){var m="";tl=i}else var m=null;if(null!==m){if("["===l.substr(tl,1)){var g="[";tl+=1}else{var g=null;il&&a('"["')}if(null!==g)var A=[m,g];else{var A=null;tl=t}}else{var A=null;tl=t}if(null!==A)var v=A;else{var j=tl,T=tl,y=il;il=!1;var F=tl,C=il;il=!1;var E=p();if(null!==E)var I=E;else{var d=b();if(null!==d)var I=d;else var I=null}if(il=C,null===I)var w="";else{var w=null;tl=F}if(il=y,null!==w){var S="";tl=T}else var S=null;if(null!==S){var R=L();if(null!==R)var k=[S,R];else{var k=null;tl=j}}else{var k=null;tl=j}if(null!==k)var v=k;else var v=null}}}else var D=null;var H=null!==D?function(l){for(var r="",n=0;n<l.length;n++)r+=l[n].join("");return K(r)}(D):null;if(null!==H)var B=H;else{var B=null;tl=e}return cl[r]={nextPos:tl,result:B},B}function t(){var r="inlineText@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;var e=tl;if(null!==l.substr(tl).match(/^[^[\]]/)){var u=l.charAt(tl);tl++}else{var u=null;il&&a("[^[\\]]")}if(null!==u)for(var s=[];null!==u;)if(s.push(u),null!==l.substr(tl).match(/^[^[\]]/)){var u=l.charAt(tl);tl++}else{var u=null;il&&a("[^[\\]]")}else var s=null;if(null!==s)var v=s;else{var t=tl,i=tl,f=il;il=!1;var o=tl,c=il;il=!1;var h=I();if(il=c,null===h)var x="";else{var x=null;tl=o}if(il=f,null!==x){var p="";tl=i}else var p=null;if(null!==p){if("["===l.substr(tl,1)){var b="[";tl+=1}else{var b=null;il&&a('"["')}if(null!==b)var P=[p,b];else{var P=null;tl=t}}else{var P=null;tl=t}if(null!==P)var v=P;else var v=null}if(null!==v)for(var m=[];null!==v;){if(m.push(v),null!==l.substr(tl).match(/^[^[\]]/)){var u=l.charAt(tl);tl++}else{var u=null;il&&a("[^[\\]]")}if(null!==u)for(var s=[];null!==u;)if(s.push(u),null!==l.substr(tl).match(/^[^[\]]/)){var u=l.charAt(tl);tl++}else{var u=null;il&&a("[^[\\]]")}else var s=null;if(null!==s)var v=s;else{var t=tl,i=tl,f=il;il=!1;var o=tl,c=il;il=!1;var h=I();if(il=c,null===h)var x="";else{var x=null;tl=o}if(il=f,null!==x){var p="";tl=i}else var p=null;if(null!==p){if("["===l.substr(tl,1)){var b="[";tl+=1}else{var b=null;il&&a('"["')}if(null!==b)var P=[p,b];else{var P=null;tl=t}}else{var P=null;tl=t}if(null!==P)var v=P;else var v=null}}else var m=null;var g=null!==m?function(l){return K(M(Z(l).join("")))}(m):null;if(null!==g)var A=g;else{var A=null;tl=e}return cl[r]={nextPos:tl,result:A},A}function i(){var l="inlineToken@"+tl,r=cl[l];if(r)return tl=r.nextPos,r.result;var n=I();if(null!==n)var e=n;else{var u=t();if(null!==u)var e=u;else var e=null}return cl[l]={nextPos:tl,result:e},e}function f(){var l="inlineTokens@"+tl,r=cl[l];if(r)return tl=r.nextPos,r.result;var n=i();if(null!==n)for(var e=[];null!==n;){e.push(n);var n=i()}else var e=null;return cl[l]={nextPos:tl,result:e},e}function o(){var r="inlineInlineText@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;var e=tl,u=tl;if(null!==l.substr(tl).match(/^[^[>]/)){var s=l.charAt(tl);tl++}else{var s=null;il&&a("[^[>]")}if(null!==s)for(var v=[];null!==s;)if(v.push(s),null!==l.substr(tl).match(/^[^[>]/)){var s=l.charAt(tl);tl++}else{var s=null;il&&a("[^[>]")}else var v=null;if(null!==v){var t=tl,i=il;il=!1;var f=tl,o=il;if(il=!1,"]]"===l.substr(tl,2)){var c="]]";tl+=2}else{var c=null;il&&a('"]]"')}if(il=o,null===c)var h="";else{var h=null;tl=f}if(il=i,null!==h){var x="";tl=t}else var x=null;if(null!==x)var p=[v,x];else{var p=null;tl=u}}else{var p=null;tl=u}if(null!==p)var b=p;else{var P=tl,m=tl,g=il;il=!1;var A=tl,j=il;il=!1;var T=I();if(il=j,null===T)var y="";else{var y=null;tl=A}if(il=g,null!==y){var F="";tl=m}else var F=null;if(null!==F){if("["===l.substr(tl,1)){var C="[";tl+=1}else{var C=null;il&&a('"["')}if(null!==C)var E=[F,C];else{var E=null;tl=P}}else{var E=null;tl=P}if(null!==E)var b=E;else var b=null}if(null!==b)for(var d=[];null!==b;){d.push(b);var u=tl;if(null!==l.substr(tl).match(/^[^[>]/)){var s=l.charAt(tl);tl++}else{var s=null;il&&a("[^[>]")}if(null!==s)for(var v=[];null!==s;)if(v.push(s),null!==l.substr(tl).match(/^[^[>]/)){var s=l.charAt(tl);tl++}else{var s=null;il&&a("[^[>]")}else var v=null;if(null!==v){var t=tl,i=il;il=!1;var f=tl,o=il;if(il=!1,"]]"===l.substr(tl,2)){var c="]]";tl+=2}else{var c=null;il&&a('"]]"')}if(il=o,null===c)var h="";else{var h=null;tl=f}if(il=i,null!==h){var x="";tl=t}else var x=null;if(null!==x)var p=[v,x];else{var p=null;tl=u}}else{var p=null;tl=u}if(null!==p)var b=p;else{var P=tl,m=tl,g=il;il=!1;var A=tl,j=il;il=!1;var T=I();if(il=j,null===T)var y="";else{var y=null;tl=A}if(il=g,null!==y){var F="";tl=m}else var F=null;if(null!==F){if("["===l.substr(tl,1)){var C="[";tl+=1}else{var C=null;il&&a('"["')}if(null!==C)var E=[F,C];else{var E=null;tl=P}}else{var E=null;tl=P}if(null!==E)var b=E;else var b=null}}else var d=null;var w=null!==d?function(l){return K(M(Z(l).join("")))}(d):null;if(null!==w)var S=w;else{var S=null;tl=e}return cl[r]={nextPos:tl,result:S},S}function c(){var l="inlineInlineToken@"+tl,r=cl[l];if(r)return tl=r.nextPos,r.result;var n=I();if(null!==n)var e=n;else{var u=o();if(null!==u)var e=u;else var e=null}return cl[l]={nextPos:tl,result:e},e}function h(){var l="inlineInlineTokens@"+tl,r=cl[l];if(r)return tl=r.nextPos,r.result;var n=c();if(null!==n)for(var e=[];null!==n;){e.push(n);var n=c()}else var e=null;return cl[l]={nextPos:tl,result:e},e}function x(){var l="tag@"+tl,r=cl[l];if(r)return tl=r.nextPos,r.result;var n=p();if(null!==n)var e=n;else{var u=b();if(null!==u)var e=u;else{var a=P();if(null!==a)var e=a;else{var s=m();if(null!==s)var e=s;else{var v=g();if(null!==v)var e=v;else{var t=I();if(null!==t)var e=t;else{var i=d();if(null!==i)var e=i;else{var f=w();if(null!==f)var e=f;else var e=null}}}}}}}return cl[l]={nextPos:tl,result:e},e}function p(){var r="tagNewpage@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;var e=tl,u=tl,s=L(),v=null!==s?s:"";if(null!==v){if("[newpage]"===l.substr(tl,9)){var t="[newpage]";tl+=9}else{var t=null;il&&a('"[newpage]"')}if(null!==t){var i=L(),f=null!==i?i:"";if(null!==f)var o=[v,t,f];else{var o=null;tl=u}}else{var o=null;tl=u}}else{var o=null;tl=u}var c=null!==o?function(){return Y()}():null;if(null!==c)var h=c;else{var h=null;tl=e}return cl[r]={nextPos:tl,result:h},h}function b(){var r="tagChapter@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;var e=tl,u=tl,s=L(),v=null!==s?s:"";if(null!==v){if("[chapter:"===l.substr(tl,9)){var t="[chapter:";tl+=9}else{var t=null;il&&a('"[chapter:"')}if(null!==t){var i=f();if(null!==i){if("]"===l.substr(tl,1)){var o="]";tl+=1}else{var o=null;il&&a('"]"')}if(null!==o){var c=L(),h=null!==c?c:"";if(null!==h)var x=[v,t,i,o,h];else{var x=null;tl=u}}else{var x=null;tl=u}}else{var x=null;tl=u}}else{var x=null;tl=u}}else{var x=null;tl=u}var p=null!==x?function(l){return ll(l)}(x[2]):null;if(null!==p)var b=p;else{var b=null;tl=e}return cl[r]={nextPos:tl,result:b},b}function P(){var r="tagPixivimage@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;var e=tl,u=tl;if("[pixivimage:"===l.substr(tl,12)){var s="[pixivimage:";tl+=12}else{var s=null;il&&a('"[pixivimage:"')}if(null!==s){var v=T();if(null!==v){var t=tl;if("-"===l.substr(tl,1)){var i="-";tl+=1}else{var i=null;il&&a('"-"')}if(null!==i){var f=y();if(null!==f)var o=[i,f];else{var o=null;tl=t}}else{var o=null;tl=t}var c=null!==o?o:"";if(null!==c){if("]"===l.substr(tl,1)){var h="]";tl+=1}else{var h=null;il&&a('"]"')}if(null!==h)var x=[s,v,c,h];else{var x=null;tl=u}}else{var x=null;tl=u}}else{var x=null;tl=u}}else{var x=null;tl=u}var p=null!==x?function(l,r){return rl(l,r&&r[1])}(x[1],x[2]):null;if(null!==p)var b=p;else{var b=null;tl=e}return cl[r]={nextPos:tl,result:b},b}function m(){var r="tagJump@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;var e=tl,u=tl;if("[jump:"===l.substr(tl,6)){var s="[jump:";tl+=6}else{var s=null;il&&a('"[jump:"')}if(null!==s){var v=y();if(null!==v){if("]"===l.substr(tl,1)){var t="]";tl+=1}else{var t=null;il&&a('"]"')}if(null!==t)var i=[s,v,t];else{var i=null;tl=u}}else{var i=null;tl=u}}else{var i=null;tl=u}var f=null!==i?function(l){return nl(l)}(i[1]):null;if(null!==f)var o=f;else{var o=null;tl=e}return cl[r]={nextPos:tl,result:o},o}function g(){var r="tagJumpuri@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;var e=tl,u=tl;if("[[jumpuri:"===l.substr(tl,10)){var s="[[jumpuri:";tl+=10}else{var s=null;il&&a('"[[jumpuri:"')}if(null!==s){var v=h();if(null!==v){if(">"===l.substr(tl,1)){var t=">";tl+=1}else{var t=null;il&&a('">"')}if(null!==t){for(var i=[],f=Q();null!==f;){i.push(f);var f=Q()}if(null!==i){var o=F();if(null!==o){for(var c=[],x=Q();null!==x;){c.push(x);var x=Q()}if(null!==c){if("]]"===l.substr(tl,2)){var p="]]";tl+=2}else{var p=null;il&&a('"]]"')}if(null!==p)var b=[s,v,t,i,o,c,p];else{var b=null;tl=u}}else{var b=null;tl=u}}else{var b=null;tl=u}}else{var b=null;tl=u}}else{var b=null;tl=u}}else{var b=null;tl=u}}else{var b=null;tl=u}var P=null!==b?function(l,r){return el(l,r)}(b[1],b[4]):null;if(null!==P)var m=P;else{var m=null;tl=e}return cl[r]={nextPos:tl,result:m},m}function A(){var r="chapterTitle@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;var e=tl,u=[];if(null!==l.substr(tl).match(/^[^\]]/)){var s=l.charAt(tl);tl++}else{var s=null;il&&a("[^\\]]")}for(;null!==s;)if(u.push(s),null!==l.substr(tl).match(/^[^\]]/)){var s=l.charAt(tl);tl++}else{var s=null;il&&a("[^\\]]")}var v=null!==u?function(l){return M(l.join(""))}(u):null;if(null!==v)var t=v;else{var t=null;tl=e}return cl[r]={nextPos:tl,result:t},t}function j(){var r="jumpuriTitle@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;var e=tl,u=[];if(null!==l.substr(tl).match(/^[^>]/)){var s=l.charAt(tl);tl++}else{var s=null;il&&a("[^>]")}for(;null!==s;)if(u.push(s),null!==l.substr(tl).match(/^[^>]/)){var s=l.charAt(tl);tl++}else{var s=null;il&&a("[^>]")}var v=null!==u?function(l){return M(l.join(""))}(u):null;if(null!==v)var t=v;else{var t=null;tl=e}return cl[r]={nextPos:tl,result:t},t}function T(){var l="numeric@"+tl,r=cl[l];if(r)return tl=r.nextPos,r.result;var n=tl,e=_();if(null!==e)for(var u=[];null!==e;){u.push(e);var e=_()}else var u=null;var a=null!==u?function(l){return l.join("")}(u):null;if(null!==a)var s=a;else{var s=null;tl=n}return cl[l]={nextPos:tl,result:s},s}function y(){var l="integer@"+tl,r=cl[l];if(r)return tl=r.nextPos,r.result;var n=tl,e=_();if(null!==e)for(var u=[];null!==e;){u.push(e);var e=_()}else var u=null;var a=null!==u?function(l){return parseInt(l.join(""),10)}(u):null;if(null!==a)var s=a;else{var s=null;tl=n}return cl[l]={nextPos:tl,result:s},s}function F(){var r="URI@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;var e=tl,u=tl,s=tl;if("http"===l.substr(tl,4)){var v="http";tl+=4}else{var v=null;il&&a('"http"')}if(null!==v){if("s"===l.substr(tl,1)){var t="s";tl+=1}else{var t=null;il&&a('"s"')}var i=null!==t?t:"";if(null!==i){if("://"===l.substr(tl,3)){var f="://";tl+=3}else{var f=null;il&&a('"://"')}if(null!==f)var o=[v,i,f];else{var o=null;tl=s}}else{var o=null;tl=s}}else{var o=null;tl=s}if(null!==o){for(var c=[],h=C();null!==h;){c.push(h);var h=C()}if(null!==c)var x=[o,c];else{var x=null;tl=u}}else{var x=null;tl=u}var p=null!==x?function(l,r){return l.join("")+r.join("")}(x[0],x[1]):null;if(null!==p)var b=p;else{var b=null;tl=e}return cl[r]={nextPos:tl,result:b},b}function C(){var r="uri_chrs@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;var e=R();if(null!==e)var u=e;else{var s=_();if(null!==s)var u=s;else{var v=E();if(null!==v)var u=v;else{if(null!==l.substr(tl).match(/^[\-._~!$&'()*+,;=:\/@.?#]/)){var t=l.charAt(tl);tl++}else{var t=null;il&&a("[\\-._~!$&'()*+,;=:\\/@.?#]")}if(null!==t)var u=t;else var u=null}}}return cl[r]={nextPos:tl,result:u},u}function E(){var r="percent_token@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;var e=tl,u=tl;if("%"===l.substr(tl,1)){var s="%";tl+=1}else{var s=null;il&&a('"%"')}if(null!==s){var v=O();if(null!==v)for(var t=[];null!==v;){t.push(v);var v=O()}else var t=null;if(null!==t)var i=[s,t];else{var i=null;tl=u}}else{var i=null;tl=u}var f=null!==i?function(l){return"%"+l.join("")}(i[1]):null;if(null!==f)var o=f;else{var o=null;tl=e}return cl[r]={nextPos:tl,result:o},o}function I(){var r="tagRuby@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;var e=tl,u=tl;if("[[rb:"===l.substr(tl,5)){var s="[[rb:";tl+=5}else{var s=null;il&&a('"[[rb:"')}if(null!==s){var v=[];if(null!==l.substr(tl).match(/^[^>]/)){var t=l.charAt(tl);tl++}else{var t=null;il&&a("[^>]")}for(;null!==t;)if(v.push(t),null!==l.substr(tl).match(/^[^>]/)){var t=l.charAt(tl);tl++}else{var t=null;il&&a("[^>]")}if(null!==v){if(">"===l.substr(tl,1)){var i=">";tl+=1}else{var i=null;il&&a('">"')}if(null!==i){var f=[];if(null!==l.substr(tl).match(/^[^\]]/)){var o=l.charAt(tl);tl++}else{var o=null;il&&a("[^\\]]")}if(null!==o)for(var c=[];null!==o;)if(c.push(o),null!==l.substr(tl).match(/^[^\]]/)){var o=l.charAt(tl);tl++}else{var o=null;il&&a("[^\\]]")}else var c=null;if(null!==c)var h=c;else{var x=tl;if("]"===l.substr(tl,1)){var p="]";tl+=1}else{var p=null;il&&a('"]"')}if(null!==p){var b=tl,P=il;il=!1;var m=tl,g=il;if(il=!1,"]"===l.substr(tl,1)){var A="]";tl+=1}else{var A=null;il&&a('"]"')}if(il=g,null===A)var j="";else{var j=null;tl=m}if(il=P,null!==j){var T="";tl=b}else var T=null;if(null!==T)var y=[p,T];else{var y=null;tl=x}}else{var y=null;tl=x}if(null!==y)var h=y;else var h=null}for(;null!==h;){if(f.push(h),null!==l.substr(tl).match(/^[^\]]/)){var o=l.charAt(tl);tl++}else{var o=null;il&&a("[^\\]]")}if(null!==o)for(var c=[];null!==o;)if(c.push(o),null!==l.substr(tl).match(/^[^\]]/)){var o=l.charAt(tl);tl++}else{var o=null;il&&a("[^\\]]")}else var c=null;if(null!==c)var h=c;else{var x=tl;if("]"===l.substr(tl,1)){var p="]";tl+=1}else{var p=null;il&&a('"]"')}if(null!==p){var b=tl,P=il;il=!1;var m=tl,g=il;if(il=!1,"]"===l.substr(tl,1)){var A="]";tl+=1}else{var A=null;il&&a('"]"')}if(il=g,null===A)var j="";else{var j=null;tl=m}if(il=P,null!==j){var T="";tl=b}else var T=null;if(null!==T)var y=[p,T];else{var y=null;tl=x}}else{var y=null;tl=x}if(null!==y)var h=y;else var h=null}}if(null!==f){if("]]"===l.substr(tl,2)){var F="]]";tl+=2}else{var F=null;il&&a('"]]"')}if(null!==F)var C=[s,v,i,f,F];else{var C=null;tl=u}}else{var C=null;tl=u}}else{var C=null;tl=u}}else{var C=null;tl=u}}else{var C=null;tl=u}var E=null!==C?function(l,r){return ul(M(l.join("")),M(Z(r).join("")))}(C[1],C[3]):null;if(null!==E)var I=E;else{var I=null;tl=e}return cl[r]={nextPos:tl,result:I},I}function d(){var r="tagEmoji@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;var e=tl,u=tl;if("[emoji:"===l.substr(tl,7)){var s="[emoji:";tl+=7}else{var s=null;il&&a('"[emoji:"')}if(null!==s){var v=S();if(null!==v){if("]"===l.substr(tl,1)){var t="]";tl+=1}else{var t=null;il&&a('"]"')}if(null!==t)var i=[s,v,t];else{var i=null;tl=u}}else{var i=null;tl=u}}else{var i=null;tl=u}var f=null!==i?function(l){return al(l)}(i[1]):null;if(null!==f)var o=f;else{var o=null;tl=e}return cl[r]={nextPos:tl,result:o},o}function w(){var r="tagStrong@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;var e=tl,u=tl;if("[strong:"===l.substr(tl,8)){var s="[strong:";tl+=8}else{var s=null;il&&a('"[strong:"')}if(null!==s){var v=[];if(null!==l.substr(tl).match(/^[^\]]/)){var t=l.charAt(tl);tl++}else{var t=null;il&&a("[^\\]]")}for(;null!==t;)if(v.push(t),null!==l.substr(tl).match(/^[^\]]/)){var t=l.charAt(tl);tl++}else{var t=null;il&&a("[^\\]]")}if(null!==v){if("]"===l.substr(tl,1)){var i="]";tl+=1}else{var i=null;il&&a('"]"')}if(null!==i)var f=[s,v,i];else{var f=null;tl=u}}else{var f=null;tl=u}}else{var f=null;tl=u}var o=null!==f?function(l){return sl(M(l.join("")))}(f[1]):null;if(null!==o)var c=o;else{var c=null;tl=e}return cl[r]={nextPos:tl,result:c},c}function S(){var r="emojiName@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;var e=tl,u=R();if(null!==u)var s=u;else{var v=_();if(null!==v)var s=v;else{if("-"===l.substr(tl,1)){var t="-";tl+=1}else{var t=null;il&&a('"-"')}if(null!==t)var s=t;else var s=null}}if(null!==s)for(var i=[];null!==s;){i.push(s);var u=R();if(null!==u)var s=u;else{var v=_();if(null!==v)var s=v;else{if("-"===l.substr(tl,1)){var t="-";tl+=1}else{var t=null;il&&a('"-"')}if(null!==t)var s=t;else var s=null}}}else var i=null;var f=null!==i?function(l){return M(l.join(""))}(i):null;if(null!==f)var o=f;else{var o=null;tl=e}return cl[r]={nextPos:tl,result:o},o}function L(){var l="newLine@"+tl,r=cl[l];if(r)return tl=r.nextPos,r.result;var n=G();if(null!==n)var e=n;else{var u=tl,a=H();if(null!==a){var s=G(),v=null!==s?s:"";if(null!==v)var t=[a,v];else{var t=null;tl=u}}else{var t=null;tl=u}if(null!==t)var e=t;else var e=null}return cl[l]={nextPos:tl,result:e},e}function R(){var r="ALPHA@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;if(null!==l.substr(tl).match(/^[A-Z]/)){var e=l.charAt(tl);tl++}else{var e=null;il&&a("[A-Z]")}if(null!==e)var u=e;else{if(null!==l.substr(tl).match(/^[a-z]/)){var s=l.charAt(tl);tl++}else{var s=null;il&&a("[a-z]")}if(null!==s)var u=s;else var u=null}return cl[r]={nextPos:tl,result:u},u}function k(){var r="BIT@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;if("0"===l.substr(tl,1)){var e="0";tl+=1}else{var e=null;il&&a('"0"')}if(null!==e)var u=e;else{if("1"===l.substr(tl,1)){var s="1";tl+=1}else{var s=null;il&&a('"1"')}if(null!==s)var u=s;else var u=null}return cl[r]={nextPos:tl,result:u},u}function D(){var r="CHAR@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;if(null!==l.substr(tl).match(/^[-]/)){var e=l.charAt(tl);tl++}else{var e=null;il&&a("[-]")}return cl[r]={nextPos:tl,result:e},e}function H(){var r="CR@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;if("\r"===l.substr(tl,1)){var e="\r";tl+=1}else{var e=null;il&&a('"\\r"')}return cl[r]={nextPos:tl,result:e},e}function B(){var l="CRLF@"+tl,r=cl[l];if(r)return tl=r.nextPos,r.result;var n=tl,e=H();if(null!==e){var u=G();if(null!==u)var a=[e,u];else{var a=null;tl=n}}else{var a=null;tl=n}return cl[l]={nextPos:tl,result:a},a}function N(){var r="CTL@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;if(null!==l.substr(tl).match(/^[\0-]/)){var e=l.charAt(tl);tl++}else{var e=null;il&&a("[\\0-]")}if(null!==e)var u=e;else{if(""===l.substr(tl,1)){var s="";tl+=1}else{var s=null;il&&a('""')}if(null!==s)var u=s;else var u=null}return cl[r]={nextPos:tl,result:u},u}function _(){var r="DIGIT@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;if(null!==l.substr(tl).match(/^[0-9]/)){var e=l.charAt(tl);tl++}else{var e=null;il&&a("[0-9]")}return cl[r]={nextPos:tl,result:e},e}function J(){var r="DQUOTE@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;if(null!==l.substr(tl).match(/^["]/)){var e=l.charAt(tl);tl++}else{var e=null;il&&a('["]')}return cl[r]={nextPos:tl,result:e},e}function O(){var r="HEXDIG@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;var e=_();if(null!==e)var u=e;else{if("A"===l.substr(tl,1)){var s="A";tl+=1}else{var s=null;il&&a('"A"')}if(null!==s)var u=s;else{if("B"===l.substr(tl,1)){var v="B";tl+=1}else{var v=null;il&&a('"B"')}if(null!==v)var u=v;else{if("C"===l.substr(tl,1)){var t="C";tl+=1}else{var t=null;il&&a('"C"')}if(null!==t)var u=t;else{if("D"===l.substr(tl,1)){var i="D";tl+=1}else{var i=null;il&&a('"D"')}if(null!==i)var u=i;else{if("E"===l.substr(tl,1)){var f="E";tl+=1}else{var f=null;il&&a('"E"')}if(null!==f)var u=f;else{if("F"===l.substr(tl,1)){var o="F";tl+=1}else{var o=null;il&&a('"F"')}if(null!==o)var u=o;else var u=null}}}}}}return cl[r]={nextPos:tl,result:u},u}function U(){var r="HTAB@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;if("	"===l.substr(tl,1)){var e="	";tl+=1}else{var e=null;il&&a('"	"')}return cl[r]={nextPos:tl,result:e},e}function G(){var r="LF@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;if("\n"===l.substr(tl,1)){var e="\n";tl+=1}else{var e=null;il&&a('"\\n"')}return cl[r]={nextPos:tl,result:e},e}function W(){var l="LWSP@"+tl,r=cl[l];if(r)return tl=r.nextPos,r.result;var n=[],e=Q();if(null!==e)var u=e;else{var a=tl,s=B();if(null!==s){var v=Q();if(null!==v)var t=[s,v];else{var t=null;tl=a}}else{var t=null;tl=a}if(null!==t)var u=t;else var u=null}for(;null!==u;){n.push(u);var e=Q();if(null!==e)var u=e;else{var a=tl,s=B();if(null!==s){var v=Q();if(null!==v)var t=[s,v];else{var t=null;tl=a}}else{var t=null;tl=a}if(null!==t)var u=t;else var u=null}}return cl[l]={nextPos:tl,result:n},n}function $(){var r="OCTET@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;if(null!==l.substr(tl).match(/^[\0-\xFF]/)){var e=l.charAt(tl);tl++}else{var e=null;il&&a("[\\0-\\xFF]")}return cl[r]={nextPos:tl,result:e},e}function q(){var r="SP@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;if(" "===l.substr(tl,1)){var e=" ";tl+=1}else{var e=null;il&&a('" "')}return cl[r]={nextPos:tl,result:e},e}function z(){var r="VCHAR@"+tl,n=cl[r];if(n)return tl=n.nextPos,n.result;if(null!==l.substr(tl).match(/^[!-~]/)){var e=l.charAt(tl);tl++}else{var e=null;il&&a("[!-~]")}return cl[r]={nextPos:tl,result:e},e}function Q(){var l="WSP@"+tl,r=cl[l];if(r)return tl=r.nextPos,r.result;var n=q();if(null!==n)var e=n;else{var u=U();if(null!==u)var e=u;else var e=null}return cl[l]={nextPos:tl,result:e},e}function V(){function r(l){l.sort();for(var r=null,n=[],e=0;e<l.length;e++)l[e]!==r&&(n.push(l[e]),r=l[e]);switch(n.length){case 0:return"end of input";case 1:return n[0];default:return n.slice(0,n.length-1).join(", ")+" or "+n[n.length-1]}}var n=r(ol),e=Math.max(tl,fl),a=e<l.length?u(l.charAt(e)):"end of input";return"Expected "+n+" but "+a+" found."}function X(){for(var r=1,n=1,e=!1,u=0;fl>u;u++){var a=l.charAt(u);"\n"===a?(e||r++,n=1,e=!1):"\r"===a|"\u2028"===a||"\u2029"===a?(r++,n=1,e=!0):(n++,e=!1)}return{line:r,column:n}}function Z(l){for(var r=[],n=0;n<l.length;n++)"object"==typeof l[n]?r=r.concat(Z(l[n])):r.push(l[n]);return r}function M(l){return l.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function K(l){return{type:"text",val:l}}function Y(){return{type:"tag",name:"newpage"}}function ll(l){return{type:"tag",name:"chapter",title:l}}function rl(l,r){return{type:"tag",name:"pixivimage",illustID:l,pageNumber:r||null}}function nl(l){return{type:"tag",name:"jump",pageNumber:l}}function el(l,r){return{type:"tag",name:"jumpuri",title:l,uri:r}}function ul(l,r){return{type:"tag",name:"rb",rubyBase:l,rubyText:r}}function al(l){return{type:"tag",name:"emoji",emojiName:l}}function sl(l){return{type:"tag",name:"strong",val:l}}var vl={ALPHA:R,BIT:k,CHAR:D,CR:H,CRLF:B,CTL:N,DIGIT:_,DQUOTE:J,HEXDIG:O,HTAB:U,LF:G,LWSP:W,OCTET:$,SP:q,URI:F,VCHAR:z,WSP:Q,chapterTitle:A,emojiName:S,inlineInlineText:o,inlineInlineToken:c,inlineInlineTokens:h,inlineText:t,inlineToken:i,inlineTokens:f,integer:y,jumpuriTitle:j,newLine:L,novel:s,numeric:T,percent_token:E,tag:x,tagChapter:b,tagEmoji:d,tagJump:m,tagJumpuri:g,tagNewpage:p,tagPixivimage:P,tagRuby:I,tagStrong:w,text:v,uri_chrs:C};if(void 0!==r){if(void 0===vl[r])throw Error("Invalid rule name: "+u(r)+".")}else r="novel";var tl=0,il=!0,fl=0,ol=[],cl={},hl=vl[r]();if(null===hl||tl!==l.length){var xl=X();throw new this.SyntaxError(V(),xl.line,xl.column)}return hl},toSource:function(){return this._source}};return l.SyntaxError=function(l,r,n){this.name="SyntaxError",this.message=l,this.line=r,this.column=n},l.SyntaxError.prototype=Error.prototype,l}();r.exports=l}()},{}],4:[function(l,r){!function(){var l=function(){var l={parse:function(l,r){function n(l,r,n){for(var e=l,u=n-l.length,a=0;u>a;a++)e=r+e;return e}function e(l){var r=l.charCodeAt(0);if(255>=r)var e="x",u=2;else var e="u",u=4;return"\\"+e+n(r.toString(16).toUpperCase(),"0",u)}function u(l){return'"'+l.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/[\x80-\uFFFF]/g,e)+'"'}function a(l){al>el||(el>al&&(al=el,sl=[]),sl.push(l))}function s(){var l="novel@"+el,r=vl[l];if(r)return el=r.nextPos,r.result;var n=[],e=x();if(null!==e)var u=e;else{var a=v();if(null!==a)var u=a;else var u=null}for(;null!==u;){n.push(u);var e=x();if(null!==e)var u=e;else{var a=v();if(null!==a)var u=a;else var u=null}}return vl[l]={nextPos:el,result:n},n}function v(){var r="text@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;var e=el;if(null!==l.substr(el).match(/^[^[\r\n]/)){var u=l.charAt(el);el++}else{var u=null;ul&&a("[^[\\r\\n]")}if(null!==u)for(var s=[];null!==u;)if(s.push(u),null!==l.substr(el).match(/^[^[\r\n]/)){var u=l.charAt(el);el++}else{var u=null;ul&&a("[^[\\r\\n]")}else var s=null;if(null!==s)var v=s;else{var t=el,i=el,f=ul;ul=!1;var o=el,c=ul;ul=!1;var h=x();if(ul=c,null===h)var P="";else{var P=null;el=o}if(ul=f,null!==P){var m="";el=i}else var m=null;if(null!==m){if("["===l.substr(el,1)){var g="[";el+=1}else{var g=null;ul&&a('"["')}if(null!==g)var A=[m,g];else{var A=null;el=t}}else{var A=null;el=t}if(null!==A)var v=A;else{var j=el,T=el,y=ul;ul=!1;var F=el,C=ul;ul=!1;var E=p();if(null!==E)var I=E;else{var w=b();if(null!==w)var I=w;else var I=null}if(ul=C,null===I)var S="";else{var S=null;el=F}if(ul=y,null!==S){var L="";el=T}else var L=null;if(null!==L){var R=d();if(null!==R)var k=[L,R];else{var k=null;el=j}}else{var k=null;el=j}if(null!==k)var v=k;else var v=null}}if(null!==v)for(var D=[];null!==v;){if(D.push(v),null!==l.substr(el).match(/^[^[\r\n]/)){var u=l.charAt(el);el++}else{var u=null;ul&&a("[^[\\r\\n]")}if(null!==u)for(var s=[];null!==u;)if(s.push(u),null!==l.substr(el).match(/^[^[\r\n]/)){var u=l.charAt(el);el++}else{var u=null;ul&&a("[^[\\r\\n]")}else var s=null;if(null!==s)var v=s;else{var t=el,i=el,f=ul;ul=!1;var o=el,c=ul;ul=!1;var h=x();if(ul=c,null===h)var P="";else{var P=null;el=o}if(ul=f,null!==P){var m="";el=i}else var m=null;if(null!==m){if("["===l.substr(el,1)){var g="[";el+=1}else{var g=null;ul&&a('"["')}if(null!==g)var A=[m,g];else{var A=null;el=t}}else{var A=null;el=t}if(null!==A)var v=A;else{var j=el,T=el,y=ul;ul=!1;var F=el,C=ul;ul=!1;var E=p();if(null!==E)var I=E;else{var w=b();if(null!==w)var I=w;else var I=null}if(ul=C,null===I)var S="";else{var S=null;el=F}if(ul=y,null!==S){var L="";el=T}else var L=null;if(null!==L){var R=d();if(null!==R)var k=[L,R];else{var k=null;el=j}}else{var k=null;el=j}if(null!==k)var v=k;else var v=null}}}else var D=null;var H=null!==D?function(l){for(var r="",n=0;n<l.length;n++)r+=l[n].join("");return X(r)}(D):null;if(null!==H)var B=H;else{var B=null;el=e}return vl[r]={nextPos:el,result:B},B}function t(){var r="inlineText@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;var e=el;if(null!==l.substr(el).match(/^[^[\]]/)){var u=l.charAt(el);el++}else{var u=null;ul&&a("[^[\\]]")}if(null!==u)for(var s=[];null!==u;)if(s.push(u),null!==l.substr(el).match(/^[^[\]]/)){var u=l.charAt(el);el++}else{var u=null;ul&&a("[^[\\]]")}else var s=null;if(null!==s)var v=s;else{var t=el,i=el,f=ul;ul=!1;var o=el,c=ul;ul=!1;var h=I();if(ul=c,null===h)var x="";else{var x=null;el=o}if(ul=f,null!==x){var p="";el=i}else var p=null;if(null!==p){if("["===l.substr(el,1)){var b="[";el+=1}else{var b=null;ul&&a('"["')}if(null!==b)var P=[p,b];else{var P=null;el=t}}else{var P=null;el=t}if(null!==P)var v=P;else var v=null}if(null!==v)for(var m=[];null!==v;){if(m.push(v),null!==l.substr(el).match(/^[^[\]]/)){var u=l.charAt(el);el++}else{var u=null;ul&&a("[^[\\]]")}if(null!==u)for(var s=[];null!==u;)if(s.push(u),null!==l.substr(el).match(/^[^[\]]/)){var u=l.charAt(el);el++}else{var u=null;ul&&a("[^[\\]]")}else var s=null;if(null!==s)var v=s;else{var t=el,i=el,f=ul;ul=!1;var o=el,c=ul;ul=!1;var h=I();if(ul=c,null===h)var x="";else{var x=null;el=o}if(ul=f,null!==x){var p="";el=i}else var p=null;if(null!==p){if("["===l.substr(el,1)){var b="[";el+=1}else{var b=null;ul&&a('"["')}if(null!==b)var P=[p,b];else{var P=null;el=t}}else{var P=null;el=t}if(null!==P)var v=P;else var v=null}}else var m=null;var g=null!==m?function(l){return X(V(Q(l).join("")))}(m):null;if(null!==g)var A=g;else{var A=null;el=e}return vl[r]={nextPos:el,result:A},A}function i(){var l="inlineToken@"+el,r=vl[l];if(r)return el=r.nextPos,r.result;var n=I();if(null!==n)var e=n;else{var u=t();if(null!==u)var e=u;else var e=null}return vl[l]={nextPos:el,result:e},e}function f(){var l="inlineTokens@"+el,r=vl[l];if(r)return el=r.nextPos,r.result;var n=i();if(null!==n)for(var e=[];null!==n;){e.push(n);var n=i()}else var e=null;return vl[l]={nextPos:el,result:e},e}function o(){var r="inlineInlineText@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;var e=el,u=el;if(null!==l.substr(el).match(/^[^[>]/)){var s=l.charAt(el);el++}else{var s=null;ul&&a("[^[>]")}if(null!==s)for(var v=[];null!==s;)if(v.push(s),null!==l.substr(el).match(/^[^[>]/)){var s=l.charAt(el);el++}else{var s=null;ul&&a("[^[>]")}else var v=null;if(null!==v){var t=el,i=ul;ul=!1;var f=el,o=ul;if(ul=!1,"]]"===l.substr(el,2)){var c="]]";el+=2}else{var c=null;ul&&a('"]]"')}if(ul=o,null===c)var h="";else{var h=null;el=f}if(ul=i,
null!==h){var x="";el=t}else var x=null;if(null!==x)var p=[v,x];else{var p=null;el=u}}else{var p=null;el=u}if(null!==p)var b=p;else{var P=el,m=el,g=ul;ul=!1;var A=el,j=ul;ul=!1;var T=I();if(ul=j,null===T)var y="";else{var y=null;el=A}if(ul=g,null!==y){var F="";el=m}else var F=null;if(null!==F){if("["===l.substr(el,1)){var C="[";el+=1}else{var C=null;ul&&a('"["')}if(null!==C)var E=[F,C];else{var E=null;el=P}}else{var E=null;el=P}if(null!==E)var b=E;else var b=null}if(null!==b)for(var d=[];null!==b;){d.push(b);var u=el;if(null!==l.substr(el).match(/^[^[>]/)){var s=l.charAt(el);el++}else{var s=null;ul&&a("[^[>]")}if(null!==s)for(var v=[];null!==s;)if(v.push(s),null!==l.substr(el).match(/^[^[>]/)){var s=l.charAt(el);el++}else{var s=null;ul&&a("[^[>]")}else var v=null;if(null!==v){var t=el,i=ul;ul=!1;var f=el,o=ul;if(ul=!1,"]]"===l.substr(el,2)){var c="]]";el+=2}else{var c=null;ul&&a('"]]"')}if(ul=o,null===c)var h="";else{var h=null;el=f}if(ul=i,null!==h){var x="";el=t}else var x=null;if(null!==x)var p=[v,x];else{var p=null;el=u}}else{var p=null;el=u}if(null!==p)var b=p;else{var P=el,m=el,g=ul;ul=!1;var A=el,j=ul;ul=!1;var T=I();if(ul=j,null===T)var y="";else{var y=null;el=A}if(ul=g,null!==y){var F="";el=m}else var F=null;if(null!==F){if("["===l.substr(el,1)){var C="[";el+=1}else{var C=null;ul&&a('"["')}if(null!==C)var E=[F,C];else{var E=null;el=P}}else{var E=null;el=P}if(null!==E)var b=E;else var b=null}}else var d=null;var w=null!==d?function(l){return X(V(Q(l).join("")))}(d):null;if(null!==w)var S=w;else{var S=null;el=e}return vl[r]={nextPos:el,result:S},S}function c(){var l="inlineInlineToken@"+el,r=vl[l];if(r)return el=r.nextPos,r.result;var n=I();if(null!==n)var e=n;else{var u=o();if(null!==u)var e=u;else var e=null}return vl[l]={nextPos:el,result:e},e}function h(){var l="inlineInlineTokens@"+el,r=vl[l];if(r)return el=r.nextPos,r.result;var n=c();if(null!==n)for(var e=[];null!==n;){e.push(n);var n=c()}else var e=null;return vl[l]={nextPos:el,result:e},e}function x(){var l="tag@"+el,r=vl[l];if(r)return el=r.nextPos,r.result;var n=p();if(null!==n)var e=n;else{var u=b();if(null!==u)var e=u;else{var a=P();if(null!==a)var e=a;else{var s=m();if(null!==s)var e=s;else{var v=g();if(null!==v)var e=v;else{var t=I();if(null!==t)var e=t;else var e=null}}}}}return vl[l]={nextPos:el,result:e},e}function p(){var r="tagNewpage@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;var e=el,u=el,s=d(),v=null!==s?s:"";if(null!==v){if("[newpage]"===l.substr(el,9)){var t="[newpage]";el+=9}else{var t=null;ul&&a('"[newpage]"')}if(null!==t){var i=d(),f=null!==i?i:"";if(null!==f)var o=[v,t,f];else{var o=null;el=u}}else{var o=null;el=u}}else{var o=null;el=u}var c=null!==o?function(){return Z()}():null;if(null!==c)var h=c;else{var h=null;el=e}return vl[r]={nextPos:el,result:h},h}function b(){var r="tagChapter@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;var e=el,u=el,s=d(),v=null!==s?s:"";if(null!==v){if("[chapter:"===l.substr(el,9)){var t="[chapter:";el+=9}else{var t=null;ul&&a('"[chapter:"')}if(null!==t){var i=f();if(null!==i){if("]"===l.substr(el,1)){var o="]";el+=1}else{var o=null;ul&&a('"]"')}if(null!==o){var c=d(),h=null!==c?c:"";if(null!==h)var x=[v,t,i,o,h];else{var x=null;el=u}}else{var x=null;el=u}}else{var x=null;el=u}}else{var x=null;el=u}}else{var x=null;el=u}var p=null!==x?function(l){return M(l)}(x[2]):null;if(null!==p)var b=p;else{var b=null;el=e}return vl[r]={nextPos:el,result:b},b}function P(){var r="tagPixivimage@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;var e=el,u=el;if("[pixivimage:"===l.substr(el,12)){var s="[pixivimage:";el+=12}else{var s=null;ul&&a('"[pixivimage:"')}if(null!==s){var v=T();if(null!==v){var t=el;if("-"===l.substr(el,1)){var i="-";el+=1}else{var i=null;ul&&a('"-"')}if(null!==i){var f=y();if(null!==f)var o=[i,f];else{var o=null;el=t}}else{var o=null;el=t}var c=null!==o?o:"";if(null!==c){if("]"===l.substr(el,1)){var h="]";el+=1}else{var h=null;ul&&a('"]"')}if(null!==h)var x=[s,v,c,h];else{var x=null;el=u}}else{var x=null;el=u}}else{var x=null;el=u}}else{var x=null;el=u}var p=null!==x?function(l,r){return K(l,r&&r[1])}(x[1],x[2]):null;if(null!==p)var b=p;else{var b=null;el=e}return vl[r]={nextPos:el,result:b},b}function m(){var r="tagJump@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;var e=el,u=el;if("[jump:"===l.substr(el,6)){var s="[jump:";el+=6}else{var s=null;ul&&a('"[jump:"')}if(null!==s){var v=y();if(null!==v){if("]"===l.substr(el,1)){var t="]";el+=1}else{var t=null;ul&&a('"]"')}if(null!==t)var i=[s,v,t];else{var i=null;el=u}}else{var i=null;el=u}}else{var i=null;el=u}var f=null!==i?function(l){return Y(l)}(i[1]):null;if(null!==f)var o=f;else{var o=null;el=e}return vl[r]={nextPos:el,result:o},o}function g(){var r="tagJumpuri@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;var e=el,u=el;if("[[jumpuri:"===l.substr(el,10)){var s="[[jumpuri:";el+=10}else{var s=null;ul&&a('"[[jumpuri:"')}if(null!==s){var v=h();if(null!==v){if(">"===l.substr(el,1)){var t=">";el+=1}else{var t=null;ul&&a('">"')}if(null!==t){for(var i=[],f=$();null!==f;){i.push(f);var f=$()}if(null!==i){var o=F();if(null!==o){for(var c=[],x=$();null!==x;){c.push(x);var x=$()}if(null!==c){if("]]"===l.substr(el,2)){var p="]]";el+=2}else{var p=null;ul&&a('"]]"')}if(null!==p)var b=[s,v,t,i,o,c,p];else{var b=null;el=u}}else{var b=null;el=u}}else{var b=null;el=u}}else{var b=null;el=u}}else{var b=null;el=u}}else{var b=null;el=u}}else{var b=null;el=u}var P=null!==b?function(l,r){return ll(l,r)}(b[1],b[4]):null;if(null!==P)var m=P;else{var m=null;el=e}return vl[r]={nextPos:el,result:m},m}function A(){var r="chapterTitle@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;var e=el,u=[];if(null!==l.substr(el).match(/^[^\]]/)){var s=l.charAt(el);el++}else{var s=null;ul&&a("[^\\]]")}for(;null!==s;)if(u.push(s),null!==l.substr(el).match(/^[^\]]/)){var s=l.charAt(el);el++}else{var s=null;ul&&a("[^\\]]")}var v=null!==u?function(l){return V(l.join(""))}(u):null;if(null!==v)var t=v;else{var t=null;el=e}return vl[r]={nextPos:el,result:t},t}function j(){var r="jumpuriTitle@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;var e=el,u=[];if(null!==l.substr(el).match(/^[^>]/)){var s=l.charAt(el);el++}else{var s=null;ul&&a("[^>]")}for(;null!==s;)if(u.push(s),null!==l.substr(el).match(/^[^>]/)){var s=l.charAt(el);el++}else{var s=null;ul&&a("[^>]")}var v=null!==u?function(l){return V(l.join(""))}(u):null;if(null!==v)var t=v;else{var t=null;el=e}return vl[r]={nextPos:el,result:t},t}function T(){var l="numeric@"+el,r=vl[l];if(r)return el=r.nextPos,r.result;var n=el,e=H();if(null!==e)for(var u=[];null!==e;){u.push(e);var e=H()}else var u=null;var a=null!==u?function(l){return l.join("")}(u):null;if(null!==a)var s=a;else{var s=null;el=n}return vl[l]={nextPos:el,result:s},s}function y(){var l="integer@"+el,r=vl[l];if(r)return el=r.nextPos,r.result;var n=el,e=H();if(null!==e)for(var u=[];null!==e;){u.push(e);var e=H()}else var u=null;var a=null!==u?function(l){return parseInt(l.join(""),10)}(u):null;if(null!==a)var s=a;else{var s=null;el=n}return vl[l]={nextPos:el,result:s},s}function F(){var r="URI@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;var e=el,u=el,s=el;if("http"===l.substr(el,4)){var v="http";el+=4}else{var v=null;ul&&a('"http"')}if(null!==v){if("s"===l.substr(el,1)){var t="s";el+=1}else{var t=null;ul&&a('"s"')}var i=null!==t?t:"";if(null!==i){if("://"===l.substr(el,3)){var f="://";el+=3}else{var f=null;ul&&a('"://"')}if(null!==f)var o=[v,i,f];else{var o=null;el=s}}else{var o=null;el=s}}else{var o=null;el=s}if(null!==o){for(var c=[],h=C();null!==h;){c.push(h);var h=C()}if(null!==c)var x=[o,c];else{var x=null;el=u}}else{var x=null;el=u}var p=null!==x?function(l,r){return l.join("")+r.join("")}(x[0],x[1]):null;if(null!==p)var b=p;else{var b=null;el=e}return vl[r]={nextPos:el,result:b},b}function C(){var r="uri_chrs@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;var e=w();if(null!==e)var u=e;else{var s=H();if(null!==s)var u=s;else{var v=E();if(null!==v)var u=v;else{if(null!==l.substr(el).match(/^[\-._~!$&'()*+,;=:\/@.?#]/)){var t=l.charAt(el);el++}else{var t=null;ul&&a("[\\-._~!$&'()*+,;=:\\/@.?#]")}if(null!==t)var u=t;else var u=null}}}return vl[r]={nextPos:el,result:u},u}function E(){var r="percent_token@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;var e=el,u=el;if("%"===l.substr(el,1)){var s="%";el+=1}else{var s=null;ul&&a('"%"')}if(null!==s){var v=N();if(null!==v)for(var t=[];null!==v;){t.push(v);var v=N()}else var t=null;if(null!==t)var i=[s,t];else{var i=null;el=u}}else{var i=null;el=u}var f=null!==i?function(l){return"%"+l.join("")}(i[1]):null;if(null!==f)var o=f;else{var o=null;el=e}return vl[r]={nextPos:el,result:o},o}function I(){var r="tagRuby@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;var e=el,u=el;if("[[rb:"===l.substr(el,5)){var s="[[rb:";el+=5}else{var s=null;ul&&a('"[[rb:"')}if(null!==s){var v=[];if(null!==l.substr(el).match(/^[^>]/)){var t=l.charAt(el);el++}else{var t=null;ul&&a("[^>]")}for(;null!==t;)if(v.push(t),null!==l.substr(el).match(/^[^>]/)){var t=l.charAt(el);el++}else{var t=null;ul&&a("[^>]")}if(null!==v){if(">"===l.substr(el,1)){var i=">";el+=1}else{var i=null;ul&&a('">"')}if(null!==i){var f=[];if(null!==l.substr(el).match(/^[^\]]/)){var o=l.charAt(el);el++}else{var o=null;ul&&a("[^\\]]")}if(null!==o)for(var c=[];null!==o;)if(c.push(o),null!==l.substr(el).match(/^[^\]]/)){var o=l.charAt(el);el++}else{var o=null;ul&&a("[^\\]]")}else var c=null;if(null!==c)var h=c;else{var x=el;if("]"===l.substr(el,1)){var p="]";el+=1}else{var p=null;ul&&a('"]"')}if(null!==p){var b=el,P=ul;ul=!1;var m=el,g=ul;if(ul=!1,"]"===l.substr(el,1)){var A="]";el+=1}else{var A=null;ul&&a('"]"')}if(ul=g,null===A)var j="";else{var j=null;el=m}if(ul=P,null!==j){var T="";el=b}else var T=null;if(null!==T)var y=[p,T];else{var y=null;el=x}}else{var y=null;el=x}if(null!==y)var h=y;else var h=null}for(;null!==h;){if(f.push(h),null!==l.substr(el).match(/^[^\]]/)){var o=l.charAt(el);el++}else{var o=null;ul&&a("[^\\]]")}if(null!==o)for(var c=[];null!==o;)if(c.push(o),null!==l.substr(el).match(/^[^\]]/)){var o=l.charAt(el);el++}else{var o=null;ul&&a("[^\\]]")}else var c=null;if(null!==c)var h=c;else{var x=el;if("]"===l.substr(el,1)){var p="]";el+=1}else{var p=null;ul&&a('"]"')}if(null!==p){var b=el,P=ul;ul=!1;var m=el,g=ul;if(ul=!1,"]"===l.substr(el,1)){var A="]";el+=1}else{var A=null;ul&&a('"]"')}if(ul=g,null===A)var j="";else{var j=null;el=m}if(ul=P,null!==j){var T="";el=b}else var T=null;if(null!==T)var y=[p,T];else{var y=null;el=x}}else{var y=null;el=x}if(null!==y)var h=y;else var h=null}}if(null!==f){if("]]"===l.substr(el,2)){var F="]]";el+=2}else{var F=null;ul&&a('"]]"')}if(null!==F)var C=[s,v,i,f,F];else{var C=null;el=u}}else{var C=null;el=u}}else{var C=null;el=u}}else{var C=null;el=u}}else{var C=null;el=u}var E=null!==C?function(l,r){return rl(V(l.join("")),V(Q(r).join("")))}(C[1],C[3]):null;if(null!==E)var I=E;else{var I=null;el=e}return vl[r]={nextPos:el,result:I},I}function d(){var l="newLine@"+el,r=vl[l];if(r)return el=r.nextPos,r.result;var n=J();if(null!==n)var e=n;else{var u=el,a=R();if(null!==a){var s=J(),v=null!==s?s:"";if(null!==v)var t=[a,v];else{var t=null;el=u}}else{var t=null;el=u}if(null!==t)var e=t;else var e=null}return vl[l]={nextPos:el,result:e},e}function w(){var r="ALPHA@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;if(null!==l.substr(el).match(/^[A-Z]/)){var e=l.charAt(el);el++}else{var e=null;ul&&a("[A-Z]")}if(null!==e)var u=e;else{if(null!==l.substr(el).match(/^[a-z]/)){var s=l.charAt(el);el++}else{var s=null;ul&&a("[a-z]")}if(null!==s)var u=s;else var u=null}return vl[r]={nextPos:el,result:u},u}function S(){var r="BIT@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;if("0"===l.substr(el,1)){var e="0";el+=1}else{var e=null;ul&&a('"0"')}if(null!==e)var u=e;else{if("1"===l.substr(el,1)){var s="1";el+=1}else{var s=null;ul&&a('"1"')}if(null!==s)var u=s;else var u=null}return vl[r]={nextPos:el,result:u},u}function L(){var r="CHAR@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;if(null!==l.substr(el).match(/^[-]/)){var e=l.charAt(el);el++}else{var e=null;ul&&a("[-]")}return vl[r]={nextPos:el,result:e},e}function R(){var r="CR@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;if("\r"===l.substr(el,1)){var e="\r";el+=1}else{var e=null;ul&&a('"\\r"')}return vl[r]={nextPos:el,result:e},e}function k(){var l="CRLF@"+el,r=vl[l];if(r)return el=r.nextPos,r.result;var n=el,e=R();if(null!==e){var u=J();if(null!==u)var a=[e,u];else{var a=null;el=n}}else{var a=null;el=n}return vl[l]={nextPos:el,result:a},a}function D(){var r="CTL@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;if(null!==l.substr(el).match(/^[\0-]/)){var e=l.charAt(el);el++}else{var e=null;ul&&a("[\\0-]")}if(null!==e)var u=e;else{if(""===l.substr(el,1)){var s="";el+=1}else{var s=null;ul&&a('""')}if(null!==s)var u=s;else var u=null}return vl[r]={nextPos:el,result:u},u}function H(){var r="DIGIT@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;if(null!==l.substr(el).match(/^[0-9]/)){var e=l.charAt(el);el++}else{var e=null;ul&&a("[0-9]")}return vl[r]={nextPos:el,result:e},e}function B(){var r="DQUOTE@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;if(null!==l.substr(el).match(/^["]/)){var e=l.charAt(el);el++}else{var e=null;ul&&a('["]')}return vl[r]={nextPos:el,result:e},e}function N(){var r="HEXDIG@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;var e=H();if(null!==e)var u=e;else{if("A"===l.substr(el,1)){var s="A";el+=1}else{var s=null;ul&&a('"A"')}if(null!==s)var u=s;else{if("B"===l.substr(el,1)){var v="B";el+=1}else{var v=null;ul&&a('"B"')}if(null!==v)var u=v;else{if("C"===l.substr(el,1)){var t="C";el+=1}else{var t=null;ul&&a('"C"')}if(null!==t)var u=t;else{if("D"===l.substr(el,1)){var i="D";el+=1}else{var i=null;ul&&a('"D"')}if(null!==i)var u=i;else{if("E"===l.substr(el,1)){var f="E";el+=1}else{var f=null;ul&&a('"E"')}if(null!==f)var u=f;else{if("F"===l.substr(el,1)){var o="F";el+=1}else{var o=null;ul&&a('"F"')}if(null!==o)var u=o;else var u=null}}}}}}return vl[r]={nextPos:el,result:u},u}function _(){var r="HTAB@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;if("	"===l.substr(el,1)){var e="	";el+=1}else{var e=null;ul&&a('"	"')}return vl[r]={nextPos:el,result:e},e}function J(){var r="LF@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;if("\n"===l.substr(el,1)){var e="\n";el+=1}else{var e=null;ul&&a('"\\n"')}return vl[r]={nextPos:el,result:e},e}function O(){var l="LWSP@"+el,r=vl[l];if(r)return el=r.nextPos,r.result;var n=[],e=$();if(null!==e)var u=e;else{var a=el,s=k();if(null!==s){var v=$();if(null!==v)var t=[s,v];else{var t=null;el=a}}else{var t=null;el=a}if(null!==t)var u=t;else var u=null}for(;null!==u;){n.push(u);var e=$();if(null!==e)var u=e;else{var a=el,s=k();if(null!==s){var v=$();if(null!==v)var t=[s,v];else{var t=null;el=a}}else{var t=null;el=a}if(null!==t)var u=t;else var u=null}}return vl[l]={nextPos:el,result:n},n}function U(){var r="OCTET@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;if(null!==l.substr(el).match(/^[\0-\xFF]/)){var e=l.charAt(el);el++}else{var e=null;ul&&a("[\\0-\\xFF]")}return vl[r]={nextPos:el,result:e},e}function G(){var r="SP@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;if(" "===l.substr(el,1)){var e=" ";el+=1}else{var e=null;ul&&a('" "')}return vl[r]={nextPos:el,result:e},e}function W(){var r="VCHAR@"+el,n=vl[r];if(n)return el=n.nextPos,n.result;if(null!==l.substr(el).match(/^[!-~]/)){var e=l.charAt(el);el++}else{var e=null;ul&&a("[!-~]")}return vl[r]={nextPos:el,result:e},e}function $(){var l="WSP@"+el,r=vl[l];if(r)return el=r.nextPos,r.result;var n=G();if(null!==n)var e=n;else{var u=_();if(null!==u)var e=u;else var e=null}return vl[l]={nextPos:el,result:e},e}function q(){function r(l){l.sort();for(var r=null,n=[],e=0;e<l.length;e++)l[e]!==r&&(n.push(l[e]),r=l[e]);switch(n.length){case 0:return"end of input";case 1:return n[0];default:return n.slice(0,n.length-1).join(", ")+" or "+n[n.length-1]}}var n=r(sl),e=Math.max(el,al),a=e<l.length?u(l.charAt(e)):"end of input";return"Expected "+n+" but "+a+" found."}function z(){for(var r=1,n=1,e=!1,u=0;al>u;u++){var a=l.charAt(u);"\n"===a?(e||r++,n=1,e=!1):"\r"===a|"\u2028"===a||"\u2029"===a?(r++,n=1,e=!0):(n++,e=!1)}return{line:r,column:n}}function Q(l){for(var r=[],n=0;n<l.length;n++)"object"==typeof l[n]?r=r.concat(Q(l[n])):r.push(l[n]);return r}function V(l){return l.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function X(l){return{type:"text",val:l}}function Z(){return{type:"tag",name:"newpage"}}function M(l){return{type:"tag",name:"chapter",title:l}}function K(l,r){return{type:"tag",name:"pixivimage",illustID:l,pageNumber:r||null}}function Y(l){return{type:"tag",name:"jump",pageNumber:l}}function ll(l,r){return{type:"tag",name:"jumpuri",title:l,uri:r}}function rl(l,r){return{type:"tag",name:"rb",rubyBase:l,rubyText:r}}var nl={ALPHA:w,BIT:S,CHAR:L,CR:R,CRLF:k,CTL:D,DIGIT:H,DQUOTE:B,HEXDIG:N,HTAB:_,LF:J,LWSP:O,OCTET:U,SP:G,URI:F,VCHAR:W,WSP:$,chapterTitle:A,inlineInlineText:o,inlineInlineToken:c,inlineInlineTokens:h,inlineText:t,inlineToken:i,inlineTokens:f,integer:y,jumpuriTitle:j,newLine:d,novel:s,numeric:T,percent_token:E,tag:x,tagChapter:b,tagJump:m,tagJumpuri:g,tagNewpage:p,tagPixivimage:P,tagRuby:I,text:v,uri_chrs:C};if(void 0!==r){if(void 0===nl[r])throw Error("Invalid rule name: "+u(r)+".")}else r="novel";var el=0,ul=!0,al=0,sl=[],vl={},tl=nl[r]();if(null===tl||el!==l.length){var il=z();throw new this.SyntaxError(q(),il.line,il.column)}return tl},toSource:function(){return this._source}};return l.SyntaxError=function(l,r,n){this.name="SyntaxError",this.message=l,this.line=r,this.column=n},l.SyntaxError.prototype=Error.prototype,l}();r.exports=l}()},{}]},{},[1]);
//# sourceMappingURL=pixiv-novel-parser.min.js.map